// Generated by CoffeeScript 1.10.0
(function() {
  var get_notification_message_content, get_notification_messages, submit_notification_message;

  get_notification_messages = function() {
    var request;
    request = $.ajax({
      url: '/get/notification/message/ips',
      method: 'POST',
      data: {}
    });
    return request.done(function(msg) {
      var i, len, message, name, ref, results, tag, uuid;
      msg = JSON.parse(msg);
      $('.dropdown.notification_message > .menu').emtpy;
      ref = msg['result'];
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        message = ref[i];
        uuid = message['uuid'];
        name = message['name'];
        tag = "<div class='item' data-value='" + uuid + "'>" + name + "</div>";
        results.push($('.dropdown.notification_message > .menu').append(tag));
      }
      return results;
    });
  };

  window.get_notification_messages = get_notification_messages;

  get_notification_message_content = function(uuid) {
    var request;
    request = $.ajax({
      url: '/get/notification/message/content',
      method: 'POST',
      data: {
        'uuid': uuid
      }
    });
    return request.done(function(msg) {
      msg = JSON.parse(msg);
      $('.notification_message_content').emtpy;
      return $('.notification_message_content').append(msg['content']);
    });
  };

  window.get_notification_message_content = get_notification_message_content;

  submit_notification_message = function(that, message, name, uuid) {
    var data, request;
    $(that).addClass('disabled');
    $(that).addClass('loading');
    data = {
      'message': message,
      'name': name
    };
    if (uuid === !null) {
      data.uuid = uuid;
    }
    request = $.ajax({
      url: '/submit/notification/message',
      method: 'POST',
      data: data
    });
    return request.done(function(msg) {
      msg = JSON.parse(msg);
      if (msg['code'] !== 'ok') {
        $('.alert').html = msg['code'];
      }
      $(that).removeClass('disabled');
      return $(that).removeClass('loading');
    });
  };

  window.submit_notification_message = submit_notification_message;

}).call(this);
